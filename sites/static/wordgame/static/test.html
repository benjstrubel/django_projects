<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Word Replacement Game</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!-- CSS from getbootstrap.com -->
    <!-- icons from feathericons.com/ -->
    <link rel='stylesheet' type='text/css' media='screen' href='css/bootstrap.min.css'>
</head>
    <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
    //promise
    navigator.mediaDevices.getUserMedia({audio:true}).then(stream => {handlerFunction(stream)})
    const recordButton = document.getElementById('startRecord');
    
   startRecord.onclick = e => {
        console.log("start record clicked");
        audioChunks = [];
        rec.start();
    }

    stopRecord.onclick = e => {
        console.log("stop record clicked");
        rec.stop();
    }

    function handlerFunction(stream) {
        rec = new MediaRecorder(stream);
        //execute callback on audio available
        rec.ondataavailable = e => {
            audioChunks.push(e.data);
            //called when done
            if(rec.state == "inactive") {
                let blob = new Blob(audioChunks,{type:'audio/mpeg-3'});
                //blob is made now send to django post
                //post goes here
                console.log("blob's done!")
            }

        }
    }
     });
    </script>

<body>
    <div class="container" id="heading">
    <h1 class="text-primary">Generic Non-Trademarked Word Replacement Game*</h1>
    <h5>Now with machine learning and a British accent!</h5>
    <br>
    </div>
    <div class="container" id="scorebar">
    <table class="table table-bordered">
        <thead>
        <tbody>
            <tr>
                <td>Entertainment</td>
                <td>Health</td>
                <td>Politics</td>
                <td>Sports</td>
                <td>Technology</td>
            </tr>
        </tbody>
</table>
<br>
</div>
<div class="container" id="userinput">
    <h5>Fill in your words for the parts of speech below</h5>
    <table class="table table-borderless">
        <thead>
            <tr>
                <th>Part of Speech</th>
                <th>Your Word</th>
            </tr>
        </thead>
        <tbody>
            <tr>    
                <td>PROPN</td><td><input name="1" type="text"></td>
        </tr>
    <tr>
        <td>NOUN</td><td><input name="2" type="text"></td>
    </tr>
    <tr>
        <td>VERB</td><td><input name="3" type="text"></td>
    </tr>
    </tbody>
    </table>
    <h5>Ready for the big reveal?</h5>
    <button id=seeIt class="btn btn-secondary">Let Me See It.</button>
    <button id="sayIt" class="btn btn-secondary">Read It To Me!</button>
    <br><br>   
</div>
<div class="container" id="creation"></div>
<div class="container" id="audio">

</div>
<div class="container" id="feedback">
    
    <div class="row">
        <div class="col-sm">
            <h5 class="text-primary">Play Again?</h5>
            Tell us what you thought of the topic and then we'll generate another game for you.
            <form>
                <button type="submit" id="upvote" name="upvote" class="btn btn-outline-primary"><img src="images/thumbs-up.svg"></button>
                <button type="submit" id="downvote" name="downvote" class="btn btn-outline-primary"><img src="images/thumbs-down.svg"></button>
                    </form>
        </div>
        <div class="col-sm">
            <h5 class="text-primary">Or Tell Me A Topic You Like</h5>
            Click the microphone and then say a topic you like. Click the stop button when you are done.<br>
            <button id="startRecord" name="startRecord" class="btn btn-outline-primary"><img src="images/mic.svg"></button>
            <button id="stopRecord" name="stopRecord" class="btn btn-outline-primary"><img src="images/octagon.svg"></button>           
        </div>
        <div class="col-sm">
            <h5 class="text-primary">Try Something A Litte Different?</h5>
            Pick a game based on one of the following.
            <form>
                <button type="submit" id="current" name="current" class="btn btn-primary">Current Headline</button>
                <button type="submit" id="local" name="local" class="btn btn-primary">Local Headline</button>
            </form>
        </div>
      </div>

</div>
<div class="container" id="bottom">
    <br>
    <p class="text text-secondary">
    *WARNING: Pregnant women, the elderly, and children under 10 should avoid prolonged exposure to Generic Word Game. Generic Word Game contains an unstable articifical intelligence core, which, if exposed due to rupture, should not be touched, inhaled, or looked at. Discontinue use of Generic Word Game if any of the following occurs: itching, vertigo, dizziness, tingling in extremities, loss of balance, slurred speech, temporary blindness, profuse sweating, or heart palpitations. If Generic Word Game begins to smoke, get away immediately. Seek shelter and cover head. When not in use the artificial intelligence core should be kept in it's special container and kept under refrigeration. Some ingredients are unknown. Do not taunt Generic Word Game. Generic Word Game comes with a lifetime warranty.
</p>
</div>
</body>
</html>
